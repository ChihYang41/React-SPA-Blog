(window.webpackJsonpblog=window.webpackJsonpblog||[]).push([[0],{115:function(t,e,n){t.exports=n(467)},120:function(t,e,n){},121:function(t,e,n){},122:function(t,e,n){},123:function(t,e,n){},153:function(t,e,n){},170:function(t,e,n){},171:function(t,e,n){},175:function(t,e,n){},467:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(31),s=n.n(r),l=(n(120),n(11)),i=n(12),c=n(14),u=n(13),d=n(15),E=n(10),m=n(25),p=(n(121),n(122),n(123),n(42)),P=n.n(p),g=n(105),h=n.n(g);function b(t){return o.a.createElement(E.b,{className:"navbar-brand",to:"/React-SPA-Blog/"},"Blog")}function f(t){var e=t.text,n=t.exact,a=t.to;return o.a.createElement(m.a,{path:a,exact:n,children:function(t){var n=t.match;return o.a.createElement("li",{className:n?"active":""},n?"> ":"",o.a.createElement(E.b,{to:a},e))}})}var v=function(){return o.a.createElement(P.a,{bg:"dark",expand:"lg",fixed:"top"},o.a.createElement(b,null),o.a.createElement(P.a.Toggle,{"aria-controls":"basic-navbar-nav"}),o.a.createElement(P.a.Collapse,{id:"basic-navbar-nav"},o.a.createElement(h.a,{className:"mr-auto"},o.a.createElement(f,{text:"Home",to:"/React-SPA-Blog/",exact:!0},"Home"),o.a.createElement(f,{text:"Posts",to:"/React-SPA-Blog/posts"},"Posts"),o.a.createElement(f,{text:"Write a post",to:"/React-SPA-Blog/newPost"},"Write a post"))))},y=n(20),O=(n(153),n(107)),L=n.n(O);function j(){return o.a.createElement("div",null,o.a.createElement(L.a,{animation:"border",role:"status"},o.a.createElement("span",{className:"sr-only"},"Loading...")))}var S=function(t){function e(t){var n;return Object(l.a)(this,e),(n=Object(c.a)(this,Object(u.a)(e).call(this,t))).handleChangeAuthor=function(t){n.setState({author:t.target.value})},n.handleChangeTitle=function(t){n.setState({title:t.target.value})},n.handleChangeContent=function(t){n.setState({body:t.target.value})},n.handleSubmit=function(t){t.preventDefault();var e=n.props.addPost,a=n.state;e(a.author,a.title,a.body),n.setState({title:"",body:"",author:""})},n.state={title:"",body:"",author:""},n}return Object(d.a)(e,t),Object(i.a)(e,[{key:"componentDidUpdate",value:function(t){var e=this.props,n=e.history,a=e.isLoadingAddPost;a===t.isLoadingAddPost||a||n.push("/React-SPA-Blog/posts")}},{key:"render",value:function(){var t=this.state,e=t.title,n=t.body,a=t.author;return this.props.isLoadingAddPost?o.a.createElement(j,null):o.a.createElement("div",null,o.a.createElement("h2",null,"Write a Post"),o.a.createElement("div",{className:"new-post-author"},o.a.createElement("label",null,"\u4f5c\u8005\uff1a"),o.a.createElement("textarea",{onChange:this.handleChangeAuthor,value:a})),o.a.createElement("div",{className:"new-post-title"},o.a.createElement("label",null,"\u6a19\u984c\uff1a"),o.a.createElement("textarea",{onChange:this.handleChangeTitle,value:e})),o.a.createElement("div",{className:"new-post-content"},o.a.createElement("label",null,"\u5167\u6587\uff1a"),o.a.createElement("textarea",{onChange:this.handleChangeContent,value:n})),o.a.createElement("button",{type:"submit",className:"btn btn-outline-info",onClick:this.handleSubmit},"Submit"))}}]),e}(a.Component),D=n(28),w=n.n(D),A="ADD_POST",N="DELETE_POST",C="EDIT_POST",R="GET_SINGLE_POST",T="GET_ALL_POSTS",_="GET_LATEST_POSTS",k=Object(m.e)(Object(y.b)(function(t){return{isLoadingAddPost:t.allPostsReducer.isLoadingAddPost}},function(t){return{addPost:function(e,n,a){t(function(t,e,n){return{type:A,payload:w.a.post("https://qootest.com/posts",{author:t,title:e,body:n})}}(e,n,a))}}})(function(t){return o.a.createElement(S,t)}));n(170);function G(t){var e=t.posts,n=t.history;return e.map(function(t){return o.a.createElement("div",{key:t.id,className:"card text-white bg-dark mb-3",onClick:function(){n.push("/React-SPA-Blog/posts/"+t.id)}},o.a.createElement("div",{className:"card-body"},o.a.createElement("h4",{className:"card-title"},t.id,". ",t.title)))})}var x=function(t){function e(){return Object(l.a)(this,e),Object(c.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){(0,this.props.getLatestPosts)()}},{key:"render",value:function(){var t=this.props,e=t.history,n=t.isLoadingGetLatestPosts,a=t.latestTenPosts;return o.a.createElement("div",null,o.a.createElement("h2",null,"Home Page"),o.a.createElement("p",null,"E \u4e16\u4ee3\u6700\u3105\u3127\u3124\u02cb\u7684\u4e8b\u60c5\uff0c\u5c31\u662f\u5230\u6230\u7565\u9ad8\u624b\u4e0a\u5947\u6469\u5bb6\u65cf\uff0c\u4e00\u908a\u7528\u5373\u6642\u901a\u628a\u59b9\uff0c\u6216\u662f\u5e36\u8457\u6700\u65b0\u7684\u54c8\u96fb\u65cf\u8ddf\u540c\u4e00\u639b\u7684\u9ebb\u5409\u53bb\u897f\u9580\u753a\u58d3\u99ac\u8def\u3002"),o.a.createElement("p",null,"\u5982\u679c\u6709\u4eba\u770b\u4e0d\u61c2\uff0c\u54c7\u54e9\u54a7\uff0c\u4f60\u5011\u5c31\u771f\u7684\u662fLKK\u4e86\u3002"),n?o.a.createElement(j,null):o.a.createElement("div",{className:"latest-posts-list"},o.a.createElement("h3",null,"\u6700\u65b0\u6587\u7ae0"),o.a.createElement("div",{className:"post-list"},o.a.createElement(G,{posts:a,key:a.id,history:e}))))}}]),e}(a.Component),F=Object(m.e)(Object(y.b)(function(t){return{latestTenPosts:t.latestPostsReducer.latestTenPosts,isLoadingGetLatestPosts:t.latestPostsReducer.isLoadingGetLatestPosts}},function(t){return{getLatestPosts:function(){t({type:_,payload:w.a.get("https://qootest.com/posts?_sort=id&_order=desc&_limit=10")})}}})(function(t){return o.a.createElement(x,t)})),B=(n(171),n(114)),I=n(65),q=n.n(I);function J(t){var e=t.alertTitle,n=t.alertContent,r=Object(a.useState)(!0),s=Object(B.a)(r,2),l=s[0],i=s[1];return Object(a.useEffect)(function(){var t=setTimeout(function(){return i(!1)},2e3);return function(){clearTimeout(t)}}),o.a.createElement(o.a.Fragment,null,o.a.createElement(q.a,{show:l,onClose:function(){return i(!1)},variant:"success",dismissible:!0},o.a.createElement(q.a.Heading,null,e),o.a.createElement("p",null,n)))}var U=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(c.a)(this,Object(u.a)(e).call(this))).state={isDeleteSuccessfully:null,isAddSuccessfully:null},t}return Object(d.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(t){(0,this.props.getAllPosts)()}},{key:"render",value:function(){var t=this.props,e=t.history,n=t.allPosts,a=t.isLoadingGetAllPosts,r=t.getAllPostsError,s=t.deletePostError,l=t.addPostError,i=r||s||l;return a?o.a.createElement(j,null):o.a.createElement("div",null,o.a.createElement("h2",null,"Posts"),i&&o.a.createElement(J,{alertTitle:"\u767c\u751f\u932f\u8aa4\uff01",alertContent:"\u9ebb\u7169\u91cd\u65b0\u64cd\u4f5c\u4e00\u6b21\u3002"}),o.a.createElement("div",{className:"post-list"},o.a.createElement(G,{posts:n,key:n.id,history:e})))}}]),e}(a.Component),M=Object(m.e)(Object(y.b)(function(t){return{allPosts:t.allPostsReducer.allPosts,isLoadingGetAllPosts:t.allPostsReducer.isLoadingGetAllPosts,getAllPostsError:t.allPostsReducer.getAllPostsError,deletePostError:t.allPostsReducer.deletePostError,addPostError:t.allPostsReducer.addPostError}},function(t){return{getAllPosts:function(){t({type:T,payload:w.a.get("https://qootest.com/posts?_sort=id&_order=desc")})}}})(function(t){return o.a.createElement(U,t)}));n(175);function W(t){var e=t.className,n=t.value,a=t.onChange;return o.a.createElement("div",{className:e},o.a.createElement("textarea",{value:n,onChange:a}))}var H=n(108),K=n.n(H),$=n(470),z=n(111),Q=function(t){function e(){return Object(l.a)(this,e),Object(c.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){var t=this.props,e=t.language,n=t.value;return o.a.createElement($.a,{language:e,style:z.docco},n)}}]),e}(a.PureComponent);Q.defaultProps={language:null};var V=Q,X=function(t){function e(t){var n;return Object(l.a)(this,e),(n=Object(c.a)(this,Object(u.a)(e).call(this,t))).handleDelete=function(){var t=n.props,e=t.match,a=t.deletePost;if(!window.confirm("\u78ba\u5b9a\u8981\u522a\u9664\u55ce\uff1f"))return null;a(e.params.id)},n.handleEditMode=function(){n.setState({isEditing:!n.state.isEditing})},n.handleEditTitle=function(t){n.setState({title:t.target.value})},n.handleEditContent=function(t){n.setState({body:t.target.value})},n.handleEditSubmit=function(){var t=n.state,e=t.author,a=t.title,o=t.body,r=n.props;(0,r.editPost)(r.singlePost.id,e,a,o),n.setState({isEditing:!n.state.isEditing,ifEditSuccessfully:null})},n.state={isEditing:!1,ifEditSuccessfully:null,title:"",body:"",author:""},n}return Object(d.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){var t=this.props,e=t.match;(0,t.getSinglePost)(e.params.id)}},{key:"componentDidUpdate",value:function(t,e){var n=this.props,a=n.match,o=n.history,r=n.isLoadingDeletePost,s=n.isLoadingEditPost,l=n.getSinglePost;if(t!==this.props){var i=this.props.singlePost;this.setState({title:i.title,body:i.body,author:i.author})}r===t.isLoadingDeletePost||r||o.push("/React-SPA-Blog/posts"),s===t.isLoadingEditPost||s||(l(a.params.id),this.setState({ifEditSuccessfully:!0}))}},{key:"render",value:function(){var t=this.state,e=t.isEditing,n=t.title,r=t.body,s=t.ifEditSuccessfully,l=this.props,i=l.singlePost,c=l.isLoadingPost,u=l.editPostError;return o.a.createElement("div",null,s&&o.a.createElement(J,{alertTitle:"\u7de8\u8f2f\u6210\u529f\uff01",alertContent:"\u4f60\u5f88\u68d2\uff01\u6587\u7ae0 bang \u4e0d\u4e00\u6a23\u4e86\uff01"}),u&&o.a.createElement(J,{alertTitle:"\u767c\u751f\u932f\u8aa4\uff01",alertContent:"\u9ebb\u7169\u91cd\u65b0\u64cd\u4f5c\u4e00\u6b21\u3002"}),o.a.createElement("div",{className:"content"},e?o.a.createElement(a.Fragment,null,o.a.createElement(W,{className:"edit-title",value:n,onChange:this.handleEditTitle}),o.a.createElement(W,{className:"edit-content",value:r,onChange:this.handleEditContent})):o.a.createElement(a.Fragment,null,c?o.a.createElement(j,null):o.a.createElement("h2",null,"Title\uff1a",i.title),c?o.a.createElement(j,null):o.a.createElement("h3",null,"Author\uff1a",i.author),c?o.a.createElement(j,null):o.a.createElement(K.a,{source:i.body,className:"card-content",linkTarget:"_blank",renderers:{code:V}})),o.a.createElement("div",{className:"btn-container"},e?o.a.createElement(a.Fragment,null,o.a.createElement("button",{className:"btn btn-warning",onClick:this.handleEditSubmit},"Submit")):o.a.createElement(a.Fragment,null,o.a.createElement("button",{className:"btn btn-primary",onClick:this.handleDelete},"Delete"),o.a.createElement("button",{className:"btn btn-warning",onClick:this.handleEditMode},"Edit")),o.a.createElement("div",{className:"back-btn-container"},o.a.createElement(E.b,{to:"/React-SPA-Blog/posts",className:"btn btn-info"}," Go back ")))))}}]),e}(a.Component),Y=Object(m.e)(Object(y.b)(function(t){return{singlePost:t.singlePostReducer.singlePost,isLoadingPost:t.singlePostReducer.isPostRequesting,isLoadingDeletePost:t.allPostsReducer.isLoadingDeletePost,isLoadingEditPost:t.singlePostReducer.isLoadingEditPost,editPostError:t.singlePostReducer.editPostError}},function(t){return{deletePost:function(e){t(function(t){return{type:N,payload:w.a.delete("https://qootest.com/posts/"+t)}}(e))},editPost:function(e,n,a,o){t(function(t,e,n,a){return{type:C,payload:w.a.put("https://qootest.com/posts/"+t,{author:e,title:n,body:a})}}(e,n,a,o))},getSinglePost:function(e){t(function(t){return{type:R,payload:w.a.get("https://qootest.com/posts/"+t)}}(e))}}})(function(t){return o.a.createElement(X,t)})),Z=function(t){function e(){return Object(l.a)(this,e),Object(c.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){return o.a.createElement(E.a,null,o.a.createElement("div",{className:"App"},o.a.createElement(v,null),o.a.createElement("div",{className:"main-page"},o.a.createElement(m.a,{exact:!0,path:"/React-SPA-Blog/",component:F}),o.a.createElement(m.a,{exact:!0,path:"/React-SPA-Blog/posts",component:M}),o.a.createElement(m.a,{path:"/React-SPA-Blog/newPost",component:k}),o.a.createElement(m.a,{path:"/React-SPA-Blog/posts/:id",component:Y}))))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var tt=n(26),et=n(32);function nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function at(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nt(n,!0).forEach(function(e){Object(et.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nt(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var ot={singlePost:{},isPostRequesting:!1,isLoadingEditPost:!1,editPostError:null};function rt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rt(n,!0).forEach(function(e){Object(et.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rt(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var lt={allPosts:[],isLoadingGetAllPosts:!1,isLoadingDeletePost:!1,isLoadingAddPost:!1,getAllPostsError:null,deletePostError:null,addPostError:null};function it(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function ct(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?it(n,!0).forEach(function(e){Object(et.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):it(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var ut={latestTenPosts:[],isLoadingGetLatestPosts:!1};var dt=Object(tt.c)({singlePostReducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"".concat(R,"_PENDING"):return at({},t,{isPostRequesting:!0});case"".concat(R,"_FULFILLED"):return at({},t,{singlePost:e.payload.data,isPostRequesting:!1});case"".concat(R,"_REJECTED"):return at({},t,{isPostRequesting:!1});case"".concat(C,"_PENDING"):return at({},t,{isLoadingEditPost:!0,editPostError:null});case"".concat(C,"_FULFILLED"):return at({},t,{singlePost:e.payload.data,isLoadingEditPost:!1});case"".concat(C,"_REJECTED"):return at({},t,{isLoadingEditPost:!1,editPostError:e.error});default:return t}},allPostsReducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"".concat(T,"_PENDING"):return st({},t,{isLoadingGetAllPosts:!0,getAllPostsError:null});case"".concat(T,"_FULFILLED"):return st({},t,{allPosts:e.payload.data,isLoadingGetAllPosts:!1});case"".concat(T,"_REJECTED"):return st({},t,{isLoadingGetAllPosts:!1,getAllPostsError:e.error});case"".concat(A,"_PENDING"):return st({},t,{isLoadingAddPost:!0,addPostError:null});case"".concat(A,"_FULFILLED"):return st({},t,{isLoadingAddPost:!1});case"".concat(A,"_REJECTED"):return st({},t,{isLoadingGetAllPosts:!1,addPostError:e.error});case"".concat(N,"_PENDING"):return st({},t,{isLoadingDeletePost:!0,deletePostError:null});case"".concat(N,"_FULFILLED"):return st({},t,{isLoadingDeletePost:!1});case"".concat(N,"_REJECTED"):return st({},t,{isLoadingDeletePost:!1,deletePostError:e.error});default:return t}},latestPostsReducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"".concat(_,"_PENDING"):return ct({},t,{isLoadingGetLatestPosts:!0});case"".concat(_,"_FULFILLED"):return ct({},t,{latestTenPosts:e.payload.data,isLoadingGetLatestPosts:!1});case"".concat(_,"_REJECTED"):return ct({},t,{isLoadingGetLatestPosts:!1});default:return t}}}),Et=n(112),mt=n(113),pt=n.n(mt),Pt=Object(tt.d)(dt,Object(tt.a)(Et.a,pt.a));s.a.render(o.a.createElement(y.a,{store:Pt},o.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[115,1,2]]]);
//# sourceMappingURL=main.bf7f0663.chunk.js.map