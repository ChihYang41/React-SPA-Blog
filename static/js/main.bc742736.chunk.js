(window.webpackJsonpblog=window.webpackJsonpblog||[]).push([[0],{115:function(t,e,a){t.exports=a(468)},120:function(t,e,a){},125:function(t,e,a){},126:function(t,e,a){},127:function(t,e,a){},153:function(t,e,a){},170:function(t,e,a){},171:function(t,e,a){},175:function(t,e,a){},468:function(t,e,a){"use strict";a.r(e);var n=a(0),o=a.n(n),s=a(31),r=a.n(s),l=(a(120),a(11)),i=a(12),c=a(15),u=a(13),d=a(16),E=a(10),m=a(25),p=a(14),g=(a(125),a(126),a(127),a(42)),h=a.n(g),b=a(106),P=a.n(b);function f(t){return o.a.createElement(E.b,{className:"navbar-brand",to:"/React-SPA-Blog/"},"Blog")}function v(t){var e=t.text,a=t.exact,n=t.to;return o.a.createElement(m.a,{path:n,exact:a,children:function(t){var a=t.match;return o.a.createElement("li",{className:a?"active":""},a?"> ":"",o.a.createElement(E.b,{to:n},e))}})}var y=function(){return o.a.createElement(h.a,{bg:"dark",expand:"lg",fixed:"top"},o.a.createElement(f,null),o.a.createElement(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),o.a.createElement(h.a.Collapse,{id:"basic-navbar-nav"},o.a.createElement(P.a,{className:"mr-auto"},o.a.createElement(v,{text:"Home",to:"/",exact:!0},"Home"),o.a.createElement(v,{text:"Posts",to:"/posts"},"Posts"),o.a.createElement(v,{text:"Write a post",to:"/newPost"},"Write a post"))))},O=(a(153),a(107)),L=a.n(O);function j(){return o.a.createElement("div",null,o.a.createElement(L.a,{animation:"border",role:"status"},o.a.createElement("span",{className:"sr-only"},"Loading...")))}var S=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(c.a)(this,Object(u.a)(e).call(this,t))).handleChangeAuthor=function(t){a.setState({author:t.target.value})},a.handleChangeTitle=function(t){a.setState({title:t.target.value})},a.handleChangeContent=function(t){a.setState({body:t.target.value})},a.handleSubmit=function(t){t.preventDefault();var e=a.props.addPost,n=a.state;e(n.author,n.title,n.body),a.setState({title:"",body:"",author:""})},a.state={title:"",body:"",author:""},a}return Object(d.a)(e,t),Object(i.a)(e,[{key:"componentDidUpdate",value:function(t){var e=this.props,a=e.history,n=e.isLoadingAddPost,o=e.setMessage;n===t.isLoadingAddPost||n||(o("\u65b0\u589e\u6210\u529f"),a.push("/posts"))}},{key:"render",value:function(){var t=this.state,e=t.title,a=t.body,n=t.author;return this.props.isLoadingAddPost?o.a.createElement(j,null):o.a.createElement("div",null,o.a.createElement("h2",null,"Write a Post"),o.a.createElement("div",{className:"new-post-author"},o.a.createElement("label",null,"\u4f5c\u8005\uff1a"),o.a.createElement("textarea",{onChange:this.handleChangeAuthor,value:n})),o.a.createElement("div",{className:"new-post-title"},o.a.createElement("label",null,"\u6a19\u984c\uff1a"),o.a.createElement("textarea",{onChange:this.handleChangeTitle,value:e})),o.a.createElement("div",{className:"new-post-content"},o.a.createElement("label",null,"\u5167\u6587\uff1a"),o.a.createElement("textarea",{onChange:this.handleChangeContent,value:a})),o.a.createElement("button",{type:"submit",className:"btn btn-outline-info",onClick:this.handleSubmit},"Submit"))}}]),e}(n.Component),D=a(28),C=a.n(D),T="ADD_POST",N="DELETE_POST",w="EDIT_POST",_="GET_SINGLE_POST",A="GET_ALL_POSTS",k="GET_LATEST_POSTS",G=function(t){return{type:"REQUEST_SUCCESS",message:t}},x=Object(m.e)(Object(p.b)(function(t){return{isLoadingAddPost:t.posts.isLoadingAddPost}},function(t){return{addPost:function(e,a,n){t(function(t,e,a){return{type:T,payload:C.a.post("https://qootest.com/posts",{author:t,title:e,body:a})}}(e,a,n))},setMessage:function(e){t(G(e))}}})(function(t){return o.a.createElement(S,t)}));a(170);function F(t){var e=t.posts,a=t.history;return e.map(function(t){return o.a.createElement("div",{key:t.id,className:"card text-white bg-dark mb-3",onClick:function(){a.push("/posts/"+t.id)}},o.a.createElement("div",{className:"card-body"},o.a.createElement("h4",{className:"card-title"},t.id,". ",t.title)))})}var M=function(t){function e(){return Object(l.a)(this,e),Object(c.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){(0,this.props.getLatestPosts)()}},{key:"render",value:function(){var t=this.props,e=t.history,a=t.isLoadingGetLatestPosts,n=t.latestTenPosts;return o.a.createElement("div",null,o.a.createElement("h2",null,"Home Page"),o.a.createElement("p",null,"E \u4e16\u4ee3\u6700\u3105\u3127\u3124\u02cb\u7684\u4e8b\u60c5\uff0c\u5c31\u662f\u5230\u6230\u7565\u9ad8\u624b\u4e0a\u5947\u6469\u5bb6\u65cf\uff0c\u4e00\u908a\u7528\u5373\u6642\u901a\u628a\u59b9\uff0c\u6216\u662f\u5e36\u8457\u6700\u65b0\u7684\u54c8\u96fb\u65cf\u8ddf\u540c\u4e00\u639b\u7684\u9ebb\u5409\u53bb\u897f\u9580\u753a\u58d3\u99ac\u8def\u3002"),o.a.createElement("p",null,"\u5982\u679c\u6709\u4eba\u770b\u4e0d\u61c2\uff0c\u54c7\u54e9\u54a7\uff0c\u4f60\u5011\u5c31\u771f\u7684\u662fLKK\u4e86\u3002"),a?o.a.createElement(j,null):o.a.createElement("div",{className:"latest-posts-list"},o.a.createElement("h3",null,"\u6700\u65b0\u6587\u7ae0"),o.a.createElement("div",{className:"post-list"},o.a.createElement(F,{posts:n,key:n.id,history:e}))))}}]),e}(n.Component),I=Object(m.e)(Object(p.b)(function(t){return{latestTenPosts:t.home.latestTenPosts,isLoadingGetLatestPosts:t.home.isLoadingGetLatestPosts}},function(t){return{getLatestPosts:function(){t({type:k,payload:C.a.get("https://qootest.com/posts?_sort=id&_order=desc&_limit=10")})}}})(function(t){return o.a.createElement(M,t)})),R=(a(171),a(114)),U=a(65),q=a.n(U);function J(t){var e=t.alertTitle,a=t.alertContent,s=t.alertType,r=Object(n.useState)(!0),l=Object(R.a)(r,2),i=l[0],c=l[1];return Object(n.useEffect)(function(){var t=setTimeout(function(){return c(!1)},2e3);return function(){clearTimeout(t)}}),o.a.createElement(o.a.Fragment,null,o.a.createElement(q.a,{show:i,onClose:function(){return c(!1)},variant:s,dismissible:!0},o.a.createElement(q.a.Heading,null,e),o.a.createElement("p",null,a)))}var B=function(t){function e(){return Object(l.a)(this,e),Object(c.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(t){(0,this.props.getAllPosts)()}},{key:"render",value:function(){var t=this.props,e=t.history,a=t.allPosts,n=t.isLoadingGetAllPosts,s=t.getAllPostsError,r=t.deletePostError,l=t.addPostError,i=s||r||l;return n?o.a.createElement(j,null):o.a.createElement("div",null,o.a.createElement("h2",null,"Posts"),i&&o.a.createElement(J,{alertTitle:"\u767c\u751f\u932f\u8aa4\uff01",alertContent:"\u9ebb\u7169\u91cd\u65b0\u64cd\u4f5c\u4e00\u6b21\u3002"}),o.a.createElement("div",{className:"post-list"},o.a.createElement(F,{posts:a,key:a.id,history:e})))}}]),e}(n.Component),W=Object(m.e)(Object(p.b)(function(t){return{allPosts:t.posts.allPosts,isLoadingGetAllPosts:t.posts.isLoadingGetAllPosts,getAllPostsError:t.posts.getAllPostsError,deletePostError:t.posts.deletePostError,addPostError:t.posts.addPostError}},function(t){return{getAllPosts:function(){t({type:A,payload:C.a.get("https://qootest.com/posts?_sort=id&_order=desc")})}}})(function(t){return o.a.createElement(B,t)}));a(175);function H(t){var e=t.className,a=t.value,n=t.onChange;return o.a.createElement("div",{className:e},o.a.createElement("textarea",{value:a,onChange:n}))}var K=a(108),Q=a.n(K),$=a(472),z=a(111),V=function(t){function e(){return Object(l.a)(this,e),Object(c.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){var t=this.props,e=t.language,a=t.value;return o.a.createElement($.a,{language:e,style:z.docco},a)}}]),e}(n.PureComponent);V.defaultProps={language:null};var X=V,Y=(a(467),function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(c.a)(this,Object(u.a)(e).call(this,t))).handleDelete=function(){var t=a.props,e=t.match,n=t.deletePost;window.confirm("\u78ba\u5b9a\u8981\u522a\u9664\u55ce\uff1f")&&n(e.params.id)},a.handleEditMode=function(){a.setState({isEditing:!a.state.isEditing})},a.handleEditTitle=function(t){a.setState({title:t.target.value})},a.handleEditContent=function(t){a.setState({body:t.target.value})},a.handleEditSubmit=function(){var t=a.state,e=t.author,n=t.title,o=t.body,s=a.props;(0,s.editPost)(s.singlePost.id,e,n,o),a.setState({isEditing:!a.state.isEditing,ifEditSuccessfully:null})},a.state={isEditing:!1,ifEditSuccessfully:null,title:"",body:"",author:""},a}return Object(d.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){var t=this.props,e=t.match;(0,t.getSinglePost)(e.params.id)}},{key:"componentDidUpdate",value:function(t,e){var a=this.props,n=a.match,o=a.history,s=a.isLoadingDeletePost,r=a.isLoadingEditPost,l=a.getSinglePost,i=a.setMessage;if(t!==this.props){var c=this.props.singlePost;this.setState({title:c.title,body:c.body,author:c.author})}s===t.isLoadingDeletePost||s||(i("\u522a\u9664\u6210\u529f"),o.push("/posts")),r===t.isLoadingEditPost||r||(l(n.params.id),this.setState({ifEditSuccessfully:!0}))}},{key:"render",value:function(){var t=this.state,e=t.isEditing,a=t.title,s=t.body,r=t.ifEditSuccessfully,l=this.props,i=l.singlePost,c=l.isLoadingPost,u=l.editPostError;return o.a.createElement("div",null,r&&o.a.createElement(J,{alertTitle:"\u7de8\u8f2f\u6210\u529f\uff01",alertContent:"\u4f60\u5f88\u68d2\uff01\u6587\u7ae0 bang \u4e0d\u4e00\u6a23\u4e86\uff01",alertType:"success"}),u&&o.a.createElement(J,{alertTitle:"\u767c\u751f\u932f\u8aa4\uff01",alertContent:"\u9ebb\u7169\u91cd\u65b0\u64cd\u4f5c\u4e00\u6b21\u3002",alertType:"danger"}),o.a.createElement("div",{className:"content"},e?o.a.createElement(n.Fragment,null,o.a.createElement(H,{className:"edit-title",value:a,onChange:this.handleEditTitle}),o.a.createElement(H,{className:"edit-content",value:s,onChange:this.handleEditContent})):o.a.createElement(n.Fragment,null,c?o.a.createElement(j,null):o.a.createElement("h2",null,"Title\uff1a",i.title),c?o.a.createElement(j,null):o.a.createElement("h3",null,"Author\uff1a",i.author),c?o.a.createElement(j,null):o.a.createElement(Q.a,{source:i.body,className:"card-content",linkTarget:"_blank",renderers:{code:X}})),o.a.createElement("div",{className:"btn-container"},e?o.a.createElement(n.Fragment,null,o.a.createElement("button",{className:"btn btn-warning",onClick:this.handleEditSubmit},"Submit")):o.a.createElement(n.Fragment,null,o.a.createElement("button",{className:"btn btn-primary",onClick:this.handleDelete},"Delete"),o.a.createElement("button",{className:"btn btn-warning",onClick:this.handleEditMode},"Edit")),o.a.createElement("div",{className:"back-btn-container"},o.a.createElement(E.b,{to:"/posts",className:"btn btn-info"}," Go back ")))))}}]),e}(n.Component)),Z=Object(m.e)(Object(p.b)(function(t){return{singlePost:t.posts.singlePost,isLoadingPost:t.posts.isPostRequesting,isLoadingDeletePost:t.posts.isLoadingDeletePost,isLoadingEditPost:t.posts.isLoadingEditPost,editPostError:t.posts.editPostError}},function(t){return{deletePost:function(e){t(function(t){return{type:N,payload:C.a.delete("https://qootest.com/posts/"+t)}}(e))},editPost:function(e,a,n,o){t(function(t,e,a,n){return{type:w,payload:C.a.put("https://qootest.com/posts/"+t,{author:e,title:a,body:n})}}(e,a,n,o))},getSinglePost:function(e){t(function(t){return{type:_,payload:C.a.get("https://qootest.com/posts/"+t)}}(e))},setMessage:function(e){t(G(e))}}})(function(t){return o.a.createElement(Y,t)})),tt=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(c.a)(this,Object(u.a)(e).call(this,t))).state={message:""},a}return Object(d.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){var t=this.props.globalMessage;return console.log(this.props),o.a.createElement(E.a,{basename:"/React-SPA-Blog"},o.a.createElement("div",{className:"App"},o.a.createElement(y,null),o.a.createElement("div",{className:"main-page"},t?o.a.createElement(J,{alertTitle:t,alertType:"success"}):null,o.a.createElement(m.a,{exact:!0,path:"/",component:I}),o.a.createElement(m.a,{exact:!0,path:"/posts",component:W}),o.a.createElement(m.a,{path:"/newPost",component:x}),o.a.createElement(m.a,{path:"/posts/:id",component:Z}))))}}]),e}(n.Component),et=Object(p.b)(function(t){return{globalMessage:t.posts.globalMessage}},null)(tt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var at=a(26),nt=a(41);function ot(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function st(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ot(a,!0).forEach(function(e){Object(nt.a)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ot(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var rt={allPosts:[],singlePost:{},isPostRequesting:!1,isLoadingGetAllPosts:!1,isLoadingDeletePost:!1,isLoadingAddPost:!1,isLoadingEditPost:!1,getAllPostsError:null,deletePostError:null,addPostError:null,editPostError:null,globalMessage:null};function lt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function it(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?lt(a,!0).forEach(function(e){Object(nt.a)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):lt(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var ct={latestTenPosts:[],isLoadingGetLatestPosts:!1};var ut=Object(at.c)({posts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"".concat(A,"_PENDING"):return st({},t,{isLoadingGetAllPosts:!0,getAllPostsError:null});case"".concat(A,"_FULFILLED"):return st({},t,{allPosts:e.payload.data,isLoadingGetAllPosts:!1});case"".concat(A,"_REJECTED"):return st({},t,{isLoadingGetAllPosts:!1,getAllPostsError:e.error});case"".concat(T,"_PENDING"):return st({},t,{isLoadingAddPost:!0,addPostError:null,globalMessage:null});case"".concat(T,"_FULFILLED"):return st({},t,{isLoadingAddPost:!1});case"".concat(T,"_REJECTED"):return st({},t,{isLoadingGetAllPosts:!1,addPostError:e.error});case"".concat(N,"_PENDING"):return st({},t,{isLoadingDeletePost:!0,deletePostError:null,globalMessage:null});case"".concat(N,"_FULFILLED"):return st({},t,{isLoadingDeletePost:!1});case"".concat(N,"_REJECTED"):return st({},t,{isLoadingDeletePost:!1,deletePostError:e.error});case"".concat(_,"_PENDING"):return st({},t,{isPostRequesting:!0});case"".concat(_,"_FULFILLED"):return st({},t,{singlePost:e.payload.data,isPostRequesting:!1});case"".concat(_,"_REJECTED"):return st({},t,{isPostRequesting:!1});case"".concat(w,"_PENDING"):return st({},t,{isLoadingEditPost:!0,editPostError:null,globalMessage:null});case"".concat(w,"_FULFILLED"):return st({},t,{singlePost:e.payload.data,isLoadingEditPost:!1});case"".concat(w,"_REJECTED"):return st({},t,{isLoadingEditPost:!1,editPostError:e.error});case"REQUEST_SUCCESS":return st({},t,{globalMessage:e.message});default:return t}},home:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"".concat(k,"_PENDING"):return it({},t,{isLoadingGetLatestPosts:!0});case"".concat(k,"_FULFILLED"):return it({},t,{latestTenPosts:e.payload.data,isLoadingGetLatestPosts:!1});case"".concat(k,"_REJECTED"):return it({},t,{isLoadingGetLatestPosts:!1});default:return t}}}),dt=a(112),Et=a(113),mt=a.n(Et),pt=Object(at.d)(ut,Object(at.a)(dt.a,mt.a));r.a.render(o.a.createElement(p.a,{store:pt},o.a.createElement(et,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[115,1,2]]]);
//# sourceMappingURL=main.bc742736.chunk.js.map